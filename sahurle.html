<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="icon" type="image/x-icon" href="assets/favicon.svg">
<title>SHL￤main</title>
<link href="https://fonts.googleapis.com/css2?family=DotGothic16&family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
<style>
	:root {
	  --glow-rgb: 114, 126, 179, 0.75;
	}
	
	.glow-point {
	  position: absolute;
	  box-shadow: 0rem 0rem 1.5rem 0.6rem rgb(var(--glow-rgb));
	  pointer-events: none;
	  z-index: 9999;
	}
	/* oh my god the tabbing space is horrid, ill go fix it later */
    /* Background gradient */
    body {
        margin: 0;
        font-family: 'DotGothic16', sans-serif;
        background: linear-gradient(0deg, #EFE6E5 0%, #CFAECE 50%, #6374AA 100%);
        color: #1E233B;
        display: flex;
        height: 100vh;
        overflow: hidden;
        align-items: center; /* Center content vertically */
        justify-content: center; /* Center content horizontally */
        user-select: none;
    }

    /* Main container with responsive layout */
    .container {
        display: flex;
        justify-content: space-between;
        width: 100%;
        max-width: 1400px;
        gap: 260px;
    }

    /* Left and right columns */
    .left, .right {
        flex: 1;
        display: flex;
        flex-direction: column;
        justify-content: center;
    }

    /* Responsive font sizes */
    @media (max-width: 768px) { /* im fixing this later */
        .container {
            flex-direction: column;
            align-items: center;
            gap: 30px;
        }
        .header-links, .subheader, .country-stats .heading {
            font-size: 10px;
        }
        .country-stats .entry {
            font-size: 12px;
        }
    }

    /* Header Links */
    .header-links {
        font-size: 14px;
        color: #2A3050;
        margin-bottom: 5px;
        position: absolute;
        top: 20px;
        left: 20px;
    }
    
    .header-links a {
        text-decoration: none;
        color: inherit;
        margin-right: 10px;
    }
    .header-links a:hover {
        text-decoration: underline;
    }

    /* Subheader text */
    .subheader {
        font-size: 12px;
        color: #2A3050;
        position: absolute;
        top: 40px;
        left: 20px;
    }

    .subheader a {
        text-decoration: none;
        color: inherit;
        margin-right: 10px;
    }
    .subheader a:hover {
        text-decoration: underline;
    }

    /* Title SVG with center alignment */
    .title-image {
        display: flex;
        justify-content: center;
        margin-bottom: 20px;
    }

    .title-image img {
	user-drag: none;
        -webkit-user-drag: none;
	-moz-user-select: none;
    }

    /* Centered Dynamic Description Text */
    .description {
        font-size: 14px;
        color: #40293F;
        text-align: center;
        line-height: 1.5;
        transition: opacity 1s ease-in-out;
        display: flex;
        justify-content: center;
    }

    /* Country Stats Table */
    .country-stats {
        font-family: 'DotGothic16', sans-serif;
        color: #1E233B;
        font-size: 20px;
        text-align: right;
        align-self: flex-end; /* Align to right edge */
    }
    .country-stats .heading {
        font-size: 10px;
	color: rgba(30, 35, 59, 0.7);
    }
    .country-stats .entry {
        font-size: 15px;
        margin: 5px 0;
        user-select: text;
    }
    .country-stats .entry::selection {
        background: black;
        color: white;
    }
</style>
</head>
<body>
    
<div class="container">
    <!-- Left Column -->
    <div class="left">
        <!-- Header Links at the top left corner -->
        <div class="header-links">
            <a href="sahurle">main</a>/ 
            <a href="dice">dice</a>/ 
            <a href="mapview">mapview</a>
        </div>
        <div class="subheader">
            inventum 1, year 476 | <a href="index">notactuallyed</a>
        </div>

        <div class="title-image">
            <img src="assets/SahurleTitle.svg" alt="Sahurle / Season 3.26 * Polariarch" height="60px">
        </div>
        <div class="description" id="descriptionText">
            "A longing for the past. Almost as if like your waiting for something to happen?"
        </div>
    </div>

    <!-- Right Column for Country Stats -->
    <div class="right">
        <div class="country-stats">
            <div class="heading">country: ms / population ／ army ／ motor ／ navy ／ air / x</div>
            <div class="entry">canary: — </div>
        </div>
    </div>
</div>
    
<script>

	// mouse cursor
	const originPosition = { x: 0, y: 0 };
	
	const last = {
	  mousePosition: originPosition
	};
	
	const config = {
	  glowDuration: 75,
	  maximumGlowPointSpacing: 10
	};
	
	const rand = (min, max) => Math.floor(Math.random() * (max - min + 1)) + min;
	
	const withUnit = (value, unit) => `${value}${unit}`,
	      px = value => withUnit(value, "px");
	
	const calcDistance = (a, b) => {
	  const diffX = b.x - a.x,
	        diffY = b.y - a.y;
	  
	  return Math.sqrt(Math.pow(diffX, 2) + Math.pow(diffY, 2));
	};
	
	const appendElement = element => document.body.appendChild(element),
	      removeElement = (element, delay) => setTimeout(() => document.body.removeChild(element), delay);
	
	const createGlowPoint = position => {
	  const glow = document.createElement("div");
	  
	  glow.className = "glow-point";
	  
	  glow.style.left = px(position.x);
	  glow.style.top = px(position.y);
	  
	  appendElement(glow);
	  
	  removeElement(glow, config.glowDuration);
	};
	
	const determinePointQuantity = distance => Math.max(
	  Math.floor(distance / config.maximumGlowPointSpacing),
	  1
	);
	
	const createGlow = (last, current) => {
	  const distance = calcDistance(last, current),
	        quantity = determinePointQuantity(distance);
	  
	  const dx = (current.x - last.x) / quantity,
	        dy = (current.y - last.y) / quantity;
	  
	  Array.from(Array(quantity)).forEach((_, index) => { 
	    const x = last.x + dx * index, 
	          y = last.y + dy * index;
	    
	    createGlowPoint({ x, y });
	  });
	};
	
	const updateLastMousePosition = position => last.mousePosition = position;
	
	const adjustLastMousePosition = position => {
	  if (last.mousePosition.x === 0 && last.mousePosition.y === 0) {
	    last.mousePosition = position;
	  }
	};
	
	const handleOnMove = e => {
	  const mousePosition = { x: e.clientX, y: e.clientY };
	  
	  adjustLastMousePosition(mousePosition);
	  
	  createGlow(last.mousePosition, mousePosition);
	  
	  updateLastMousePosition(mousePosition);
	};
	
	window.onmousemove = e => handleOnMove(e);
	window.ontouchmove = e => handleOnMove(e.touches[0]);
	document.body.onmouseleave = () => updateLastMousePosition(originPosition);

	// better mouse fr

	// military strength system
    	function calculateMilitaryStrength(countryData) {
      	const armyStrength = countryData.army / 20000;
      	const motorStrength = countryData.motor / 800; 
      	const navyStrength = countryData.navy / 300;
      	const airforceStrength = countryData.airforce / 200;

      	let militaryStrength = armyStrength + motorStrength + navyStrength + airforceStrength;
      	militaryStrength *= countryData.multiplier; // Apply multiplier
      
      	return militaryStrength.toFixed(2); // Round to two decimal places
    	}	

    	fetch('sahurlecountries.json') // Fetch the JSON data
      	.then(response => response.json())
      	.then(data => {
        	const headingDiv = document.querySelector('.country-stats'); 
        	data.forEach(country => {
          	const militaryStrength = calculateMilitaryStrength(country);
          	const entryDiv = document.createElement('div');
          	entryDiv.classList.add('entry');
          	entryDiv.textContent = `${country.country}: ${militaryStrength} / ${country.population} / ${country.army} / ${country.motor} / ${country.navy} / ${country.airforce} / ${country.multiplier}x`;
          	headingDiv.appendChild(entryDiv);
        	});
      	})
      	.catch(error => console.error('Error fetching data:', error));
</script>

</body>
</html>
